
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>List of users</title>
    @Styles.Render("~/Content/css")
</head>
<body>

    <div class="container" id="wrapper">

    </div>

    <script type="text/template" id="table_template">
    <table>
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody>
            <% _.each(users, function(user)) { %>
            <tr>
                <td><%= user.get('FirstName') %></td>
                <td><%= user.get('LastName') %></td>
                <td><%= user.get('Email') %></td>
                <td><%= user.get('Password') %></td>
            </tr>
            <% } %>
        </tbody>
    </table>
    </script>

    

    <script src="~/Scripts/jquery-3.4.1.js"></script>
    <script src="~/Scripts/underscore.js"></script>
    <script src="~/Scripts/backbone.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script>
        var User = Backbone.Model.extend();

        var Users = Backbone.Collection.extend({
            model: User,
            url: 'Test/GetUsers'
        });

        var TableUser = Backbone.View.extend({
            el: $('wrapper'),
            initialize: function () {
                this.render()
            },
            render: function () {
                var self = this;
                var users = new Users();
                users.fetch({
                    success: function (users) {
                        var variable = { users: users.models }
                        var template = _.template($('#table_template').html())
                        self.$el.html(template(variable))
                    }
                });
            }
        });

        new TableUser();
    </script>
</body>
</html>
